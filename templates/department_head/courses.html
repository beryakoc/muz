{% extends 'base.html' %}

{% block title %}Manage Courses - University SIS{% endblock %}

{% block content %}
<h1>Manage Courses</h1>

<div style="margin-bottom: 2rem;">
    <h2>Add New Course</h2>
    <form method="post" style="max-width: 600px;">
        {% csrf_token %}
        <input type="hidden" name="action" value="create">
        
        <div class="form-group">
            <label for="code">Course Code:</label>
            <input type="text" name="code" id="code" required>
        </div>
        
        <div class="form-group">
            <label for="name">Course Name:</label>
            <input type="text" name="name" id="name" required>
        </div>
        
        <div class="form-group">
            <label for="teacher">Assign Teacher:</label>
            <select name="teacher" id="teacher">
                <option value="">No teacher assigned</option>
                {% for teacher in teachers %}
                <option value="{{ teacher.id }}">{{ teacher.get_full_name }}</option>
                {% endfor %}
            </select>
        </div>
        
        <button type="submit" class="btn">Add Course</button>
    </form>
</div>

<div>
    <h2>Existing Courses</h2>
    {% if courses %}
    <table>
        <thead>
            <tr>
                <th>Course Code</th>
                <th>Course Name</th>
                <th>Teacher</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for course in courses %}
            <tr>
                <td>{{ course.code }}</td>
                <td>{{ course.name }}</td>
                <td>{{ course.teacher.get_full_name|default:"Not assigned" }}</td>
                <td>
                    <a href="{% url 'course_detail' course.id %}" class="btn">Manage</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>No courses found.</p>
    {% endif %}
</div>
{% endblock %}


